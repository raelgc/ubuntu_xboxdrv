# xboxdrv.conf
# Please, DO NOT EDIT THIS FILE. Edit /etc/defaults/xboxdrv

# Shortcut variable
env DEFAULT="/etc/default/xboxdrv"
start on filesystem

pre-start script
    # Remove existing joystick devices
    rm -f /dev/input/js*
    # source the source of our instance count
    if [ -f $DEFAULT ] ; then
        . $DEFAULT
    fi

    # Get the number of controllers the user has defined
    # This is dynamic up do controller[x] in the default file
    # - (ex. if user has 5 controllers defined, start 5 instances)
    INSTANCES=$( grep -c CONTROLLER._OPTIONS=. $DEFAULT )

    # start the controllers with increasing Controller IDs
    for INS in $( seq 1 $INSTANCES ) ; do
        exec start xboxdrv ID="$INS"
    done
 
end script

#since this job is written to controller the controller processes, a main
# - script section is not required for desired functionality
